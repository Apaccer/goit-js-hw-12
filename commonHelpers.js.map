{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\nconst form = document.querySelector('.search-form');\nconst container = document.querySelector('.gallery');\nconst loaderContainer = document.querySelector('.loader');\nconst loadMoreButton = document.querySelector('.load-more-btn');\n\nlet page = 1;\nconst limit = 15;\nlet query = '';\nloaderContainer.style.display = 'none';\nlet totalPages = 0;\nform.addEventListener('submit', onFormSubmit);\nloadMoreButton.addEventListener('click', onLoadMore);\n\nfunction onFormSubmit(e) {\n  e.preventDefault();\n  page = 1;\n  query = e.target.elements.searchQuery.value.trim();\n  if (!query) {\n    iziToast.warning({\n      position: 'topRight',\n      message: 'Please enter a search query.',\n    });\n    return;\n  } else {\n    loadMoreButton.style.display = 'none';\n  }\n  container.innerHTML = '';\n  loaderContainer.style.display = 'block';\n  searchImages(query)\n    .then(data => renderImages(data))\n    .catch(error =>\n      iziToast.error({\n        position: 'topRight',\n        message: `Error: ${error}`,\n      })\n    )\n    .finally(() => {\n      e.target.reset();\n      loaderContainer.style.display = 'none';\n    });\n}\n\nasync function onLoadMore() {\n  loaderContainer.style.display = 'block';\n  const data = await searchImages(query);\n  renderImages(data);\n  loaderContainer.style.display = 'none';\n\n  const galleryCard = document.querySelector('.photo-card');\n  const cardHeight = galleryCard.getBoundingClientRect().height;\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nasync function searchImages(q) {\n  const response = await axios.get('https://pixabay.com/api/', {\n    params: {\n      key: '42192602-d8808410d4367b6455b886704',\n      q,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: limit,\n    },\n  });\n  page += 1;\n  return response.data;\n}\n\nfunction imageTemplate(images) {\n  const {\n    webformatURL,\n    largeImageURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = images;\n  return `\n    <div class=\"photo-card\">\n      <a class=\"photo-card-link\" href=\"${largeImageURL}\">\n        <img\n          class=\"photo-card__img\"\n          src=\"${webformatURL}\" \n          alt=\"${tags}\" \n        />\n      </a>\n      <div class=\"info\">\n        <p class=\"info-item\">\n          <b class=\"info-item-title\">Likes</b>\n          <span class=\"info-item-value\">${likes}</span>\n        </p>\n        <p class=\"info-item\">\n          <b class=\"info-item-title\">Views</b>\n          <span class=\"info-item-value\">${views}</span>\n        </p>\n        <p class=\"info-item\">\n          <b class=\"info-item-title\">Comments</b>\n          <span class=\"info-item-value\">${comments}</span>\n        </p>\n        <p class=\"info-item\">\n          <b class=\"info-item-title\">Downloads</b>\n          <span class=\"info-item-value\">${downloads}</span>\n        </p>\n      </div>\n    </div>\n    `;\n}\n\nfunction renderImages({ hits, totalHits }) {\n  totalPages = Math.ceil(totalHits / limit);\n  if (hits.length > 0) {\n    const markup = hits.map(imageTemplate).join('');\n    container.insertAdjacentHTML('beforeend', markup);\n    const lightbox = new SimpleLightbox('.photo-card-link', {\n      captionDelay: 250,\n      captionsData: 'alt',\n    });\n    lightbox.refresh();\n    buttonCheck();\n  } else {\n    iziToast.error({\n      position: 'topRight',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n  }\n}\n\nfunction buttonCheck() {\n  if (page > totalPages) {\n    iziToast.info({\n      position: 'topRight',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  } else {\n    loadMoreButton.style.display = 'block';\n  }\n}\n"],"names":["form","container","loaderContainer","loadMoreButton","page","limit","query","totalPages","onFormSubmit","onLoadMore","e","iziToast","searchImages","data","renderImages","error","cardHeight","q","response","axios","imageTemplate","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","hits","totalHits","markup","SimpleLightbox","buttonCheck"],"mappings":"owBAKA,MAAMA,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAY,SAAS,cAAc,UAAU,EAC7CC,EAAkB,SAAS,cAAc,SAAS,EAClDC,EAAiB,SAAS,cAAc,gBAAgB,EAE9D,IAAIC,EAAO,EACX,MAAMC,EAAQ,GACd,IAAIC,EAAQ,GACZJ,EAAgB,MAAM,QAAU,OAChC,IAAIK,EAAa,EACjBP,EAAK,iBAAiB,SAAUQ,CAAY,EAC5CL,EAAe,iBAAiB,QAASM,CAAU,EAEnD,SAASD,EAAaE,EAAG,CAIvB,GAHAA,EAAE,eAAc,EAChBN,EAAO,EACPE,EAAQI,EAAE,OAAO,SAAS,YAAY,MAAM,OACvCJ,EAOHH,EAAe,MAAM,QAAU,WAPrB,CACVQ,EAAS,QAAQ,CACf,SAAU,WACV,QAAS,8BACf,CAAK,EACD,MACJ,CAGEV,EAAU,UAAY,GACtBC,EAAgB,MAAM,QAAU,QAChCU,EAAaN,CAAK,EACf,KAAKO,GAAQC,EAAaD,CAAI,CAAC,EAC/B,MAAME,GACLJ,EAAS,MAAM,CACb,SAAU,WACV,QAAS,UAAUI,CAAK,EAChC,CAAO,CACF,EACA,QAAQ,IAAM,CACbL,EAAE,OAAO,QACTR,EAAgB,MAAM,QAAU,MACtC,CAAK,CACL,CAEA,eAAeO,GAAa,CAC1BP,EAAgB,MAAM,QAAU,QAChC,MAAMW,EAAO,MAAMD,EAAaN,CAAK,EACrCQ,EAAaD,CAAI,EACjBX,EAAgB,MAAM,QAAU,OAGhC,MAAMc,EADc,SAAS,cAAc,aAAa,EACzB,sBAAqB,EAAG,OAEvD,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QACd,CAAG,CACH,CAEA,eAAeJ,EAAaK,EAAG,CAC7B,MAAMC,EAAW,MAAMC,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAK,qCACL,EAAAF,EACA,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAb,EACA,SAAUC,CACX,CACL,CAAG,EACD,OAAAD,GAAQ,EACDc,EAAS,IAClB,CAEA,SAASE,EAAcC,EAAQ,CAC7B,KAAM,CACJ,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGP,EACJ,MAAO;AAAA;AAAA,yCAEgCE,CAAa;AAAA;AAAA;AAAA,iBAGrCD,CAAY;AAAA,iBACZE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAMqBC,CAAK;AAAA;AAAA;AAAA;AAAA,0CAILC,CAAK;AAAA;AAAA;AAAA;AAAA,0CAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,0CAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,KAKnD,CAEA,SAASd,EAAa,CAAE,KAAAe,EAAM,UAAAC,GAAa,CAEzC,GADAvB,EAAa,KAAK,KAAKuB,EAAYzB,CAAK,EACpCwB,EAAK,OAAS,EAAG,CACnB,MAAME,EAASF,EAAK,IAAIT,CAAa,EAAE,KAAK,EAAE,EAC9CnB,EAAU,mBAAmB,YAAa8B,CAAM,EAC/B,IAAIC,EAAe,mBAAoB,CACtD,aAAc,IACd,aAAc,KACpB,CAAK,EACQ,QAAO,EAChBC,GACJ,MACItB,EAAS,MAAM,CACb,SAAU,WACV,QACE,0EACR,CAAK,CAEL,CAEA,SAASsB,GAAc,CACjB7B,EAAOG,EACTI,EAAS,KAAK,CACZ,SAAU,WACV,QAAS,4DACf,CAAK,EAEDR,EAAe,MAAM,QAAU,OAEnC"}